<div class="ui-width-large ui-margin-auto">
    <form class="ui-form-stacked"
          [formGroup]="registerInfo"
          (ngSubmit)="register()">
        <h2 class="ui-h2 ui-margin-medium-bottom">用户注册</h2>
        <div class="ui-margin">
            <div class="ui-form-label ui-flex ui-flex-between">
                <div class="ui-flex ui-flex-between">
                    <label for="name">
                        姓名
                    </label>
                    <div *ngIf="f.name.errors && f.name.touched"
                         class="ui-text-danger">
                        <span *ngIf="f.name.errors.required">请填写姓名</span>
                    </div>
                </div>
            </div>
            <input class="ui-input"
                   formControlName="name"
                   id="name"
                   type="text"
                   [class.ui-form-danger]="f.name.errors && f.name.touched"
                   [class.ui-form-success]="!f.name.errors && f.name.touched"
                   placeholder="请输入姓名">
        </div>
        <div class="ui-margin">
            <div class="ui-form-label ui-flex ui-flex-between">
                <div class="ui-flex ui-flex-between">
                    <label for="loginName">
                        登录名
                    </label>
                    <div *ngIf="f.loginName.errors && f.loginName.touched"
                         class="ui-text-danger">
                        <span *ngIf="f.loginName.errors.required">请填写登录名</span>
                        <span *ngIf="f.loginName.errors.pattern">4-20位英文字母和数字</span>
                    </div>
                </div>
            </div>
            <input class="ui-input"
                   formControlName="loginName"
                   id="loginName"
                   type="text"
                   [class.ui-form-danger]="f.loginName.errors && f.loginName.touched"
                   [class.ui-form-success]="!f.loginName.errors && f.loginName.touched"
                   placeholder="请输入登录名">
        </div>
        <div formGroupName="passwords">
            <div class="ui-margin">
                <div class="ui-form-label ui-flex ui-flex-between">
                    <div class="ui-flex ui-flex-between">
                        <label for="password">
                            密码
                        </label>
                        <div *ngIf="p.password.errors && p.password.touched"
                             class="ui-text-danger">
                            <span *ngIf="p.password.errors.required">请填写密码</span>
                            <span *ngIf="p.password.errors.pattern">6-20位英文字母或数字</span>
                        </div>
                    </div>
                </div>
                <input class="ui-input"
                       formControlName="password"
                       id="password"
                       type="password"
                       [class.ui-form-danger]="p.password.errors && p.password.touched"
                       [class.ui-form-success]="!p.password.errors && p.password.touched"
                       placeholder="登录密码">
            </div>
            <div class="ui-margin">
                <div class="ui-flex ui-flex-between">
                    <label for="confirmPassword">
                        确认密码
                    </label>
                    <div *ngIf="p.confirmPassword.errors && p.confirmPassword.touched"
                         class="ui-text-danger">
                        <span *ngIf="p.confirmPassword.errors.required">请填写确认密码</span>
                    </div>
                    <div *ngIf="getConfirmPasswordError()"
                         class="ui-text-danger">
                        <span>密码和确认密码不一致</span>
                    </div>
                </div>
                <input class="ui-input"
                       id="confirmPassword"
                       formControlName="confirmPassword"
                       type="password"
                       [class.ui-form-danger]="p.confirmPassword.touched && (p.confirmPassword.errors || getConfirmPasswordError())"
                       [class.ui-form-success]="!p.confirmPassword.errors && p.confirmPassword.touched && !getConfirmPasswordError()"
                       placeholder="确认密码">
            </div>
        </div>
        <div class="ui-margin">
            <div class="ui-form-label ui-flex ui-flex-between">
                <div class="ui-flex ui-flex-between">
                    <label for="phone">
                        手机号
                    </label>
                    <div *ngIf="f.phone.errors && f.phone.touched"
                         class="ui-text-danger">
                        <span *ngIf="f.phone.errors.required">请填写手机号</span>
                        <span *ngIf="f.phone.errors.pattern">手机号格式不正确</span>
                    </div>
                </div>
            </div>
            <input class="ui-input"
                   formControlName="phone"
                   id="phone"
                   type="text"
                   [class.ui-form-danger]="f.phone.errors && f.phone.touched"
                   [class.ui-form-success]="!f.phone.errors && f.phone.touched"
                   placeholder="请输入手机号">
        </div>
        {{registerInfo.valid | json}}
        <div class="ui-margin-medium-top ui-text-center">
            <button type="submit"
                    [disabled]="!registerInfo.valid"
                    class="ui-button ui-button-danger ui-button-large ui-width-1-2">
                注册
            </button>
        </div>
        <p class="ui-text-center">
            已有账号？
            <a routerLink="../login">
                去登录
            </a>
        </p>
    </form>
</div>
